---
description: Create a simple dapp to integrate with MetaMask.
toc_max_heading_level: 4
sidebar_position: 3
---

# Create a simple dapp 

This tutorial demonstrates the basics of creating a simple dapp using JavaScript that integrates with MetaMask. 

MetaMask allows dapps to handle transactions, authenticate users through Ethereum addresses instead of traditional logins, and engage with smart contracts directly.

:::important Learning tutorial
This tutorial is for educational purposes and connects to MetaMask using the legacy provider object, `window.ethereum`.
For deployment in a production environment, we recommend [connecting to MetaMask using EIP-6963](../how-to/connect/index.md) instead. 

[EIP-6963](https://eips.ethereum.org/EIPS/eip-6963) introduces an alternative wallet detection mechanism to the `window.ethereum` provider, and enables dapps to support [wallet interoperability](../concepts/wallet-interoperability.md).

For a full end-to-end tutorial that can be used in production, see the
[Create a simple React dapp](../tutorials/react-dapp-local-state.md) tutorial.
:::

## Prerequisites

- [MetaMask](https://metamask.io/) [installed in the browser of your choice](/snaps/get-started/install-flask/) on your development machine.
 We recommend [running a development network](/wallet/how-to/run-devnet/) on MetaMask when developing a dapp.

- A text editor of your choice, such as [VS Code](https://code.visualstudio.com/).
 You can install the [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer)
extension for VS Code to easily launch a local development server for your dapp.

- A module bundler, such as [Webpack](https://github.com/webpack/webpack).

- [npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm).

## Steps

### 1. Set up a new project

Your dapp project directory must have the following structure:

```text
simple-dapp/
├─ src/
│  ├─ index.js
├─ dist/
│  ├─ index.html
```

For the dapp to work, your project script `index.js` must:

- [Detect the MetaMask provider.](#2-detect-metamask)
- [Determine a user's connected network.](#3-determine-a-users-connected-network)
- [Access an account.](#4-access-an-account)

#### Create a project

Create and navigate into the `simple-dapp` directory using the following commands:

```bash
mkdir simple-dapp
cd simple-dapp
```

:::caution important
If you import any modules into your project, such as
[`@metamask/detect-provider`](https://github.com/MetaMask/detect-provider), use a bundler such as
[Webpack](https://github.com/webpack/webpack) to compile the modules and create an output script
`dist/main.js`.
See [Webpack's Getting Started guide](https://webpack.js.org/guides/getting-started/) for more information.
:::

In the `simple-dapp` directory, create `src` for the source files and `dist` for the distribution files that output from your Webpack builds. 
Create a JavaScript file in `src`, then create an HTML file in `dist` from the `simple-dapp` root.
Include the following HTML code example to establish a link to the JavaScript file generated by Webpack:

```jsx title="index.html"
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simple dapp</title>
</head>
<body>
    <script src="../dist/index.js"></script>  <!-- Links to the JavaScript bundle created by Webpack -->
</body>
</html>
```

#### Install and configure Webpack

Navigate to the root of your `simple-dapp` directory and run the following commands to initialize npm.

```bash 
npm init -y && npm install --save-dev webpack webpack-cli
```

Create a `webpack.config.js` in the root of your project with the following configuration:

```jsx title="index.html"
const path = require('path');

module.exports = {
    entry: './src/index.js',
    output: {
        path: path.resolve(__dirname, 'dist'),
        filename: 'index.js'
    },
    mode: 'development'
};
```

Then, edit `package.json` to include a build script:

```json
"scripts": {
    "build": "webpack"
}
```

When you run `npm run build` from your terminal, Webpack bundles the content in `src/index.js` into `dist/main.js`, which is linked in `index.html`.

### 2. Detect MetaMask

You can use the `@metamask/detect-provider` module to detect the MetaMask Ethereum provider.

#### Install `@metamask/detect-provider`

Use [npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) to install
`@metamask/detect-provider` in your project directory:

```bash
npm i @metamask/detect-provider
```

#### Detect the MetaMask provider

The following code example demonstrates how to detect the MetaMask provider in your dapp using `@metamask/detect-provider`:

```jsx title="src/index.js"
import detectEthereumProvider from "@metamask/detect-provider";

async function setup() {
    const provider = await detectEthereumProvider();

    if (provider && provider === window.ethereum) {
        console.log('MetaMask is available!');
        startApp(provider); // Initialize your dapp with MetaMask.
    } else {
        console.log("Please install MetaMask!");
    }
}

function startApp(provider) {
    if (provider !== window.ethereum) {
        console.error("Do you have multiple wallets installed?");
    }
}

window.addEventListener('load', setup);
```
#### Serve the project

To test and verify your project works with MetaMask, serve your project through a local server. 
If using VS Code, right-click the `index.html` file, and select **Open with Live Server**. 

Alternatively, you can install `http-server` using the following command:

```bash
npm install -g http-server
``` 
Then navigate to the project directory, and run `http-server`. 

Open your browser and go to the provided local server URL (typically http://127.0.0.1:8080).

### 3. Determine a user's connected network

Each network has a unique Chain ID. 
Determining the connected network requires querying this Chain ID.
You can track the network’s [chain ID](../../how-to/manage-networks/detect-network/#chain-ids.md) to identify which network a user is connected to.

Use the [`eth_chainId`](/wallet/reference/eth_chainId)
RPC method to detect the chain ID of the user's current network.
Listen to the [`chainChanged`](/wallet/reference/provider-api/#chainchanged) provider event to
detect when the user changes networks.

For example, the following code detects a user's network and when the user changes networks:

```jsx title="index.js"
const chainId = await window.ethereum 
    .request({ method: "eth_chainId" });

window.ethereum
    .on("chainChanged", handleChainChanged);

function handleChainChanged(chainId) {
    // We recommend reloading the page, unless you must do otherwise.
    window.location.reload();
}
```
For more information on Chain IDs, see [Detect a user's network](../how-to/connect/detect-metamask.md)

### 4. Access an account

To interact with Ethereum on the user's behalf, such as sending transactions or requesting balances, you need their Ethereum address. To perform actions, such as [signing transactions](../how-to/sign-data/index.md), your dapp needs to access user accounts.

:::info note
`eth_requestAccounts` internally calls [`wallet_requestPermissions`](/wallet/reference/wallet_requestPermissions)
to [request permission](../how-to/manage-permissions.md) to call the restricted
[`eth_accounts`](/wallet/reference/eth_accounts) method.
:::

#### Create a connect button

We recommend providing a button to allow users to connect MetaMask to your dapp.
Selecting the button should activate the call to `eth_requestAccounts`, allowing you to access to user's accounts.

For example, the following JavaScript code accesses the user's accounts when they select a connect
button:

```jsx title="index.js"
// You should only attempt to request the user's account in response to user interaction, such as
// selecting a button. Otherwise, you risk spamming the user. If you fail to retrieve
// the user's account, you should encourage the user to initiate the attempt.
const ethereumButton = document.querySelector(".enableEthereumButton");
const showAccount = document.querySelector(".showAccount");

ethereumButton.addEventListener("click", () => {
  getAccount();
});

// While awaiting the call to eth_requestAccounts, you should disable any buttons the user can
// select to initiate the request. MetaMask rejects any additional requests while the first is still
// pending.
async function getAccount() {
  const accounts = await window.ethereum
    .request({ method: "eth_requestAccounts" })
      .catch((err) => {
        if (err.code === 4001) {
          // EIP-1193 userRejectedRequest error.
          // If this happens, the user rejected the connection request.
          console.log("Please connect to MetaMask.");
        } else {
          console.error(err);
        }
      });
  const account = accounts[0];
  showAccount.innerHTML = account;
}
```

The following HTML code displays the button and the current account:

```html title="index.html"
<!-- Display a connect button and the current account -->
<button class="enableEthereumButton">Enable Ethereum</button>
<h2>Account: <span class="showAccount"></span></h2>
```

For more information on connecting MetaMask to your dapp, see [Access a user's accounts](/wallet/how-to/connect/access-accounts/)

## Example simple dapp 

Using the following project structure, you can run a build process to bundle your JavaScript code and copy your HTML file into the `dist` directory:

```text
simple-dapp/
├─ src/
│  ├─ index.js
├─ dist/
│  ├─ index.html
```

The following is an example simple dapp script and HTML file:

### JavaScript

```jsx title="index.js"
/*****************************************/
/* Detect the MetaMask Ethereum provider */
/*****************************************/

import detectEthereumProvider from '@metamask/detect-provider';

const provider = await detectEthereumProvider();

if (!provider) {
  console.log('Please install MetaMask!');
} else {
  if (provider !== window.ethereum) {
    console.error('Do you have multiple wallets installed?');
  }
}

/**********************************************************/
/* Handle chain (network) and chainChanged (per EIP-1193) */
/**********************************************************/

const handleChainChanged = () => {
  window.location.reload();
}; //Reload the page to reflect the new chain.

window.ethereum.on('chainChanged', handleChainChanged);

/***********************************************************/
/* Handle user accounts and accountsChanged (per EIP-1193) */
/***********************************************************/

let currentAccount = null;

const handleAccountsChanged = (accounts) => {
  if (accounts.length === 0) {
    console.log('Please connect to MetaMask.');
  } else if (accounts[0] !== currentAccount) {
    currentAccount = accounts[0];
    showAccount.innerHTML = currentAccount;
  }
};

window.ethereum.request({ method: 'eth_accounts' })
  .then(handleAccountsChanged)
  .catch((err) => {
    console.error(err);
  });

window.ethereum.on('accountsChanged', handleAccountsChanged);

/*********************************************/
/* Access the user's accounts (per EIP-1102) */
/*********************************************/

const ethereumButton = document.querySelector('.enableEthereumButton');
const showAccount = document.querySelector('.showAccount');

ethereumButton.addEventListener('click', async () => {
  try {
    const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
    const account = accounts[0];
    showAccount.innerHTML = account;
  } catch (err) {
    if (err.code === 4001) {
      console.log('Please connect to MetaMask.');
    } else {
      console.error(err);
    }
  }
});
```

### HTML

```html title="index.html"
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Simple dapp</title>
  <script type="module" src="index.js"></script>
</head>
<body>
  <!-- Display a connect button and the current account -->
  <button class="enableEthereumButton">Enable Ethereum</button>
  <h2>Account: <span class="showAccount"></span></h2>
</body>
</html>
```

## Conclusion

You've successfully created a simple dapp and connected it to MetaMask using JavaScript and the `window.ethereum` provider.
With this setup, your dapp can interact with MetaMask and allow users to securely access accounts and perform transactions on the Ethereum blockchain.